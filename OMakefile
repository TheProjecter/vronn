.PHONY: clean clean-results distclean fft
# Use the byte-code compiler
BYTE_ENABLED = false
NATIVE_ENABLED = true

OCAMLFLAGS += -rectypes -unsafe
OCAMLOPTFLAGS += -ffast-math -inline 2

USE_OCAMLFIND = true

OCAMLPACKS[] =
	unix
	graphics
	fftw
	fftw2
	camlimages

OCamlLibrary(BinaryParse,BinaryParse)
OCamlLibrary(fft,fft)
OCamlLibrary(affichage,affichage)
OCamlLibrary(reseaux,reseaux)
OCamlLibrary(params,params)
OCAML_LIBS = BinaryParse fft affichage reseaux params


# Build the program
OCamlProgram(run/notes, notes)
OCamlProgram(run/reforme, reforme)
OCamlProgram(run/regardelesbeauxcoefsdelafft, regardelesbeauxcoefsdelafft)
.DEFAULT: run/notes.opt run/reforme.opt

fft: run/regardelesbeauxcoefsdelafft.opt

clean:
  rm -f *.o *.cm* *~ run/* *.a

clean-results:
  rm -f resultsonth2.png results/*

distclean: clean clean-results
  rm -f fft.out struct_sontheorique2

maintainerclean: distclean
